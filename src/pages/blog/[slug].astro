---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Navbar from '../../components/Navbar';
import Footer from '../../components/Footer';
import FloatingMenu from '../../components/FloatingMenu';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

const post = Astro.props;
const { Content } = await post.render();
const pathname = `/blog/${post.slug}`;
---

<BaseLayout title={`${post.data.title} | Brobot Media`} description={post.data.description}>
  <main class="min-h-screen bg-[#020617] text-white pt-32 pb-20">
    <Navbar client:load pathname={pathname} />
    
    <article class="max-w-4xl mx-auto px-6 py-20">
      <!-- Header -->
      <div class="text-center mb-16">
        <div class="flex justify-center items-center gap-4 mb-8">
          <span class="text-[12px] font-black uppercase tracking-[0.4em] text-amber-500">
            {post.data.pubDate.toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'long',
              day: 'numeric',
            })}
          </span>
          <div class="w-12 h-[1px] bg-amber-500/20"></div>
          <span class="text-[12px] font-black uppercase tracking-[0.4em] text-slate-500">
            By {post.data.author}
          </span>
        </div>
        <h1 class="text-5xl md:text-7xl font-display font-black tracking-tighter mb-8 leading-tight uppercase">
          {post.data.title}
        </h1>
        {post.data.tags && (
          <div class="flex flex-wrap justify-center gap-3">
            {post.data.tags.map(tag => (
              <span class="px-4 py-2 rounded-full bg-amber-600/10 border border-amber-500/20 text-amber-500 text-[10px] font-black uppercase tracking-widest">
                {tag}
              </span>
            ))}
          </div>
        )}
      </div>

      <!-- Hero Image -->
      {post.data.heroImage && (
        <div class="relative mb-20 rounded-[40px] overflow-hidden border border-white/5 shadow-2xl shadow-amber-900/20">
          <img 
            src={post.data.heroImage} 
            alt={post.data.title}
            class="w-full h-auto"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-[#020617] via-transparent to-transparent opacity-40"></div>
        </div>
      )}

      <!-- Content -->
      <div class="prose prose-invert prose-amber max-w-none 
        prose-h1:font-display prose-h1:font-black prose-h1:uppercase prose-h1:tracking-tighter prose-h1:text-4xl md:prose-h1:text-5xl
        prose-h2:font-display prose-h2:font-black prose-h2:uppercase prose-h2:tracking-tight prose-h2:text-3xl prose-h2:mt-16
        prose-p:text-slate-400 prose-p:text-lg prose-p:leading-relaxed prose-p:font-medium
        prose-strong:text-white prose-strong:font-black
        prose-blockquote:border-amber-500 prose-blockquote:bg-amber-500/5 prose-blockquote:rounded-2xl prose-blockquote:p-6 prose-blockquote:italic
        prose-li:text-slate-400 prose-li:font-medium
      ">
        <Content />
      </div>

      <!-- CTA -->
      <div class="mt-32 p-12 md:p-20 rounded-[60px] bg-amber-600 relative overflow-hidden text-center shadow-2xl shadow-amber-600/40">
        <div class="relative z-10">
          <h2 class="text-3xl md:text-5xl font-display font-black tracking-tighter text-white mb-8 uppercase">
            Ready to build your <br /> own AI Agent?
          </h2>
          <div class="flex flex-col md:flex-row items-center justify-center gap-6">
            <a href="/contact" class="bg-white text-amber-600 px-10 py-5 rounded-full font-black uppercase tracking-[0.2em] hover:scale-105 transition-all shadow-xl text-center w-full md:w-auto">
              Get Started
            </a>
            <a href="/" class="text-white font-black uppercase tracking-[0.2em] border border-white/20 px-10 py-5 rounded-full hover:bg-white/10 transition-all text-center w-full md:w-auto">
              View All Solutions
            </a>
          </div>
        </div>
        <div class="absolute top-0 right-0 p-10 opacity-20 transform translate-x-1/4 -translate-y-1/4">
          <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" class="w-80 h-80 fill-white">
            <path d="M44.7,-76.4C58.8,-69.2,71.8,-59.1,79.6,-45.8C87.4,-32.6,90,-16.3,88.5,-0.9C87,14.5,81.4,29,72.6,41.5C63.8,54.1,51.8,64.7,38.1,71.1C24.4,77.5,9.1,79.7,-5.7,89.5C-20.4,99.3,-34.5,116.7,-46,117.8C-57.5,118.9,-66.3,103.7,-73.4,89.3C-80.5,74.9,-85.9,61.4,-89.2,47.7C-92.5,34.1,-93.6,20.3,-91.5,7.2C-89.4,-5.9,-84.1,-18.3,-77.3,-29.4C-70.5,-40.5,-62.1,-50.3,-51.7,-58.9C-41.2,-67.4,-28.7,-74.7,-15.5,-77.2C-2.2,-79.8,10.6,-77.7,24.3,-76.1C38,-74.5,44.7,-76.4,44.7,-76.4Z" transform="translate(100 100)" />
          </svg>
        </div>
      </div>
    </article>

    <FloatingMenu client:load pathname={pathname} />
    <Footer client:visible />
  </main>
</BaseLayout>

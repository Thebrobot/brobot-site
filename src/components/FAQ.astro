---
import { Plus, Minus, HelpCircle } from "lucide-react";

const faqs = [
  {
    question: "Does it sound like a robot?",
    answer: "No. Brobot uses advanced neural voice technology that captures human-like inflection and emotion. Most people can't tell they are talking to an AI."
  },
  {
    question: "How long does setup take?",
    answer: "Our team can have your custom industry model live and connected to your phone line in under 15 minutes. It's truly plug-and-play."
  },
  {
    question: "Can it book appointments in my calendar?",
    answer: "Yes. Brobot integrates directly with tools like Google Calendar, Outlook, and most major CRMs to book jobs and appointments in real-time."
  },
  {
    question: "Are the calls recorded and transcribed?",
    answer: "Yes. Every single conversation is recorded and transcribed in real-time with 99% accuracy. You can review the full audio and text of any call directly from your dashboard to ensure quality and track customer details."
  },
  {
    question: "Can it trigger actions based on what happens in the call?",
    answer: "Absolutely. Brobot can trigger 'Smart Workflows' based on specific keywords or conversation outcomes. For example, it can instantly send a follow-up text after a call, notify your sales team of a high-priority lead, or update your CRM automatically."
  },
  {
    question: "What happens if the AI gets stuck?",
    answer: "If the AI encounters a complex situation it can't handle, it can instantly transfer the call to a human team member or take a detailed message for you."
  }
];
---

<section class="py-24 md:py-40 px-6 bg-[#020617]">
  <div class="container mx-auto max-w-4xl">
    <div class="text-center mb-16 md:mb-20">
      <div class="inline-flex items-center space-x-2 bg-amber-500/10 border border-amber-500/20 px-4 py-1.5 rounded-full text-[10px] uppercase tracking-[0.4em] font-black text-amber-400 mb-8">
        <HelpCircle className="w-3 h-3" />
        <span>Support_Faq</span>
      </div>
      <h2 class="text-4xl md:text-6xl font-display font-black tracking-tighter text-white">
        COMMON <span class="text-amber-500 italic">QUESTIONS.</span>
      </h2>
    </div>

    <div class="cyber-glass border border-white/5 bg-white/[0.02] rounded-3xl md:rounded-[40px] p-6 md:p-12 shadow-2xl">
      {faqs.map((faq, index) => (
        <div class="faq-item border-b border-white/5 last:border-0" data-index={index}>
          <button
            class="faq-button w-full py-6 md:py-8 flex items-center justify-between text-left group gap-4"
          >
            <span class="faq-question text-lg md:text-xl font-bold transition-colors text-white group-hover:text-amber-400">
              {faq.question}
            </span>
            <div class="faq-icon w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 transition-all bg-white/5 text-slate-500 rotate-180">
              <Plus className="w-4 h-4 plus-icon" />
              <Minus className="w-4 h-4 minus-icon hidden" />
            </div>
          </button>
          <div class="faq-answer-container overflow-hidden h-0 opacity-0 transition-all duration-300 ease-in-out">
            <p class="pb-6 md:pb-8 text-slate-400 text-sm md:text-base leading-relaxed max-w-3xl">
              {faq.answer}
            </p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  function initFaq() {
    const items = document.querySelectorAll('.faq-item');
    
    items.forEach(item => {
      const button = item.querySelector('.faq-button');
      const container = item.querySelector('.faq-answer-container');
      const icon = item.querySelector('.faq-icon');
      const question = item.querySelector('.faq-question');
      const plus = item.querySelector('.plus-icon');
      const minus = item.querySelector('.minus-icon');

      button?.addEventListener('click', () => {
        const isOpen = container?.classList.contains('h-auto');
        
        // Close all other items
        items.forEach(otherItem => {
          if (otherItem !== item) {
            const otherContainer = otherItem.querySelector('.faq-answer-container');
            const otherIcon = otherItem.querySelector('.faq-icon');
            const otherQuestion = otherItem.querySelector('.faq-question');
            const otherPlus = otherItem.querySelector('.plus-icon');
            const otherMinus = otherItem.querySelector('.minus-icon');
            
            otherContainer?.setAttribute('style', 'height: 0px');
            otherContainer?.classList.remove('h-auto', 'opacity-100');
            otherContainer?.classList.add('h-0', 'opacity-0');
            otherIcon?.classList.remove('bg-amber-600', 'text-white', 'rotate-0');
            otherIcon?.classList.add('bg-white/5', 'text-slate-500', 'rotate-180');
            otherQuestion?.classList.remove('text-amber-500');
            otherQuestion?.classList.add('text-white');
            otherPlus?.classList.remove('hidden');
            otherMinus?.classList.add('hidden');
          }
        });

        // Toggle current item
        if (isOpen) {
          container?.setAttribute('style', 'height: 0px');
          container?.classList.remove('h-auto', 'opacity-100');
          container?.classList.add('h-0', 'opacity-0');
          icon?.classList.remove('bg-amber-600', 'text-white', 'rotate-0');
          icon?.classList.add('bg-white/5', 'text-slate-500', 'rotate-180');
          question?.classList.remove('text-amber-500');
          question?.classList.add('text-white');
          plus?.classList.remove('hidden');
          minus?.classList.add('hidden');
        } else {
          const height = container?.scrollHeight;
          container?.setAttribute('style', `height: ${height}px`);
          container?.classList.remove('h-0', 'opacity-0');
          container?.classList.add('h-auto', 'opacity-100');
          icon?.classList.add('bg-amber-600', 'text-white', 'rotate-0');
          icon?.classList.remove('bg-white/5', 'text-slate-500', 'rotate-180');
          question?.classList.add('text-amber-500');
          question?.classList.remove('text-white');
          plus?.classList.add('hidden');
          minus?.classList.remove('hidden');
        }
      });
    });
  }

  // Run on page load
  initFaq();
  // Run on Astro page transitions
  document.addEventListener('astro:after-swap', initFaq);
</script>
